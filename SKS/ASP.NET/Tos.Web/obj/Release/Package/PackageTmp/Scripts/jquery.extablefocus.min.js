(function(n){var t=function(t){var t=n(t),i=t[0];for(var r in i)(function(r){n.isFunction(i[r])&&(t[r]=/^get[^a-z]/.test(r)?function(){return i[r].apply(i,arguments)}:function(){var n=arguments;return t.each(function(i){var u=t[i];u[r].apply(u,n)}),t})})(r);return t};n.ex=n.ex||{};n.ex.tableFocus=function(t,i){var u=this,r=u.config=n.extend({},n.ex.tableFocus.defaults,i);if(r.index==undefined)return n(t).exTableFocus(i);r.targets=t;r.target=r.targets.eq(r.index);u._bindEvent()};n.extend(n.ex.tableFocus.prototype,{_bindEvent:function(){var i=this,t=i.config;t.target.on("focus keydown keyup",t.focusExpr,function(r){if(t.currentField&&t.currentField[0]==r.target||(t.currentField=n(r.target),t.currentCell=t.currentField.parents("td:eq(0)"),t.currentRow&&t.currentRow.removeClass(t.currentRowClass),t.currentRow=t.currentCell.parents("tr:eq(0)").addClass(t.currentRowClass)),r.type=="keyup")r.keyCode==t.ctrlKey?t.isCtrl=!1:r.keyCode==t.shiftKey&&(t.isShift=!1);else if(r.type=="keydown"){var u=t.currentField.prop("tagName");if(r.keyCode==t.ctrlKey)t.isCtrl=!0;else if(r.keyCode==t.shiftKey)t.isShift=!0;else{if(t.overrideTabControl&&t.tabKey==r.keyCode)return t.verticalTabControl&&(t.isShift?i.focusUp():i.focusDown()),!1;if(t.overrideCrControl&&t.crKey==r.keyCode&&u!="A")return t.verticalCrControl?t.isShift?i.focusUp():i.focusDown():i.focusRight(),!1;if((r.keyCode==t.downKey||r.keyCode==t.upKey)&&(t.isShift||!/^(TEXTAREA|SELECT)$/.test(u)))return r.keyCode==t.upKey?i.focusUp():i.focusDown(),!1}}})},_focusField:function(t,i){var f=this,u=f.config,r;return u.focusSuccess=!1,t.each(function(n){var i=t.eq(n);if(!i.is(":hidden")&&!i.prop("readonly")&&!i.prop("disabled"))return r=i,!1}),r?(r=n(r),r=n(r).focus(),u.selectValue&&r.select(),u.focusSuccess=!0):i&&i(),f},_moveRow:function(t,i){var r=this,e=r.config,u;i||(i=e.currentCell);var o=i.prop("cellIndex"),s=i.parent().parent(),h=s[t](),f=h.find("td").eq(o);return f.length==0?r:(u=f.find(e.focusExpr),t=="prev"&&(u=n(u.get().reverse())),r._focusField(u,function(){r._moveRow(t,f)}),r)},_moveCol:function(t,i){var r=this,e=r.config,u,f;return(i||(i=e.currentCell),u=i[t](),u.length==0)?r:(f=u.find(e.focusExpr),t=="prev"&&(f=n(f.get().reverse())),r._focusField(f,function(){r._moveCol(t,u)}),r)},_moveSibling:function(t){var r=this,u=r.config,f=!1,i=[];return u.currentCell.find(u.focusExpr).each(function(){u.currentField[0]==this?f=!0:(f&&t=="next"||!f&&t=="prev")&&i.push(this)}),t=="prev"&&(i=i.reverse()),r._focusField(n(i)),r},focusDown:function(){var n=this,t=n.config;return n._moveSibling("next"),t.focusSuccess||n._moveRow("next"),n},focusUp:function(){var n=this,t=n.config;return n._moveSibling("prev"),t.focusSuccess||n._moveRow("prev"),n},focusLeft:function(){var n=this,t=n.config;return n._moveSibling("prev"),t.focusSuccess||n._moveCol("prev"),n},focusRight:function(){var n=this,t=n.config;return n._moveSibling("next"),t.focusSuccess||n._moveCol("next"),n}});n.ex.tableFocus.defaults={api:!1,focusExpr:"select,input,textarea,a",currentRowClass:"ex-table-current-row",overrideTabControl:!1,verticalTabControl:!1,overrideCrControl:!1,verticalCrControl:!1,selectValue:!0,tabKey:"9",crKey:"13",shiftKey:"16",ctrlKey:"17",downKey:"40",upKey:"38",leftKey:"37",rightKey:"39"};n.fn.exTableFocus=function(i){var r=this,u=[];return r.each(function(t){var f=r.eq(t),e=f.data("ex-table-focus")||new n.ex.tableFocus(r,n.extend(i||{},{index:t}));u.push(e);f.data("ex-table-focus",e)}),i&&i.api?t(u):r}})(jQuery);
/*
//# sourceMappingURL=jquery.extablefocus.min.js.map
*/